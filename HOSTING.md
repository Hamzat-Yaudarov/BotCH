# üöÄ –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ö–æ—Å—Ç–∏–Ω–≥—É SPN VPN Bot –Ω–∞ VPS

–≠—Ç–æ –ø–æ–¥—Ä–æ–±–Ω–æ–µ –ø–æ—à–∞–≥–æ–≤–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –±–æ—Ç–∞ –Ω–∞ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ (VPS).

---

## üìã –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

1. [–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞](#–ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞-—Å–µ—Ä–≤–µ—Ä–∞)
2. [–ù–∞—á–∞–ª—å–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ (First Deploy)](#–Ω–∞—á–∞–ª—å–Ω–æ–µ-—Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ)
3. [–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ (Update Deploy)](#–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ-–ø—Ä–æ–µ–∫—Ç–∞)
4. [–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–æ—Ç–æ–º](#—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ-–±–æ—Ç–æ–º)
5. [–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ](#–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥-–∏-–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ)
6. [–†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º](#—Ä–µ—à–µ–Ω–∏–µ-–ø—Ä–æ–±–ª–µ–º)

---

# –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

## –®–∞–≥ 1Ô∏è‚É£: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ –≤–∞—à–µ–º—É VPS –ø–æ SSH
ssh root@–í–ê–®_IP_–°–ï–†–í–ï–†–ê

# –ü—Ä–∏–º–µ—Ä:
# ssh root@195.133.21.73
```

**–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:** SSH –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–∞–º –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É —É–¥–∞–ª–µ–Ω–Ω–æ –∏ –≤—ã–ø–æ–ª–Ω—è—Ç—å –∫–æ–º–∞–Ω–¥—ã —Ç–∞–∫ –∂–µ, –∫–∞–∫ –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ.

---

## –®–∞–≥ 2Ô∏è‚É£: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã

```bash
# –û–±–Ω–æ–≤–∏—Ç–µ —Å–ø–∏—Å–æ–∫ –ø–∞–∫–µ—Ç–æ–≤
apt update

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
apt upgrade -y
```

**–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:** `apt` - —ç—Ç–æ –ø–∞–∫–µ—Ç–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä Linux. –ü–µ—Ä–≤–∞—è –∫–æ–º–∞–Ω–¥–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ø–∞–∫–µ—Ç–∞—Ö, –≤—Ç–æ—Ä–∞—è —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.

---

## –®–∞–≥ 3Ô∏è‚É£: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Python –∏ Git

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Python 3 –∏ pip
apt install -y python3 python3-pip python3-venv

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Git –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–¥–æ–º
apt install -y git

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–µ—Ä—Å–∏–∏ (–¥–æ–ª–∂–Ω—ã –±—ã—Ç—å 3.8+)
python3 --version
pip3 --version
git --version
```

**–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:**
- **Python3** - –Ω—É–∂–µ–Ω –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –Ω–∞—à–µ–≥–æ –±–æ—Ç–∞
- **pip3** - –ø–∞–∫–µ—Ç–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä –¥–ª—è Python (—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏)
- **python3-venv** - —Å–æ–∑–¥–∞–µ—Ç –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞
- **Git** - –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ–¥–∞ —Å GitHub

---

## –®–∞–≥ 4Ô∏è‚É£: –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –±–æ—Ç–∞

```bash
# –°–æ–∑–¥–∞–π—Ç–µ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
useradd -m -s /bin/bash vpnbot

# –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ—Å—å –Ω–∞ —ç—Ç–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
su - vpnbot
```

**–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:** –ó–∞–ø—É—Å–∫–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –æ—Ç root –Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ. –û—Ç–¥–µ–ª—å–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å `vpnbot` –∏–º–µ–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞. –ï—Å–ª–∏ –±–æ—Ç –±—É–¥–µ—Ç –≤–∑–ª–æ–º–∞–Ω, —Ö–∞–∫–µ—Ä –ø–æ–ª—É—á–∏—Ç –¥–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ –∫ –µ–≥–æ —Ñ–∞–π–ª–∞–º, –∞ –Ω–µ –≤—Å–µ–º—É —Å–µ—Ä–≤–µ—Ä—É.

---

# –ù–∞—á–∞–ª—å–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

## –®–∞–≥ 5Ô∏è‚É£: –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

```bash
# –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤—ã –≤ –¥–æ–º–∞—à–Ω–µ–π –ø–∞–ø–∫–µ vpnbot
pwd  # –¥–æ–ª–∂–Ω–æ –≤—ã–≤–µ—Å—Ç–∏: /home/vpnbot

# –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ –ø—Ä–æ–µ–∫—Ç –∏–∑ GitHub (–∏–ª–∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª—ã)
git clone https://github.com/YOUR_USERNAME/vpn_bot.git

# –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞
cd vpn_bot
```

**–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:** `git clone` —Å–∫–∞—á–∏–≤–∞–µ—Ç –≤–µ—Å—å –∫–æ–¥ –ø—Ä–æ–µ–∫—Ç–∞ —Å GitHub –Ω–∞ —Å–µ—Ä–≤–µ—Ä. –≠—Ç–æ –Ω–∞–º–Ω–æ–≥–æ —É–¥–æ–±–Ω–µ–µ, —á–µ–º –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª—ã –≤—Ä—É—á–Ω—É—é.

---

## –®–∞–≥ 6Ô∏è‚É£: –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# –°–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ Python
python3 -m venv venv

# –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –µ–≥–æ
source venv/bin/activate

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–æ (–≤ –Ω–∞—á–∞–ª–µ —Å—Ç—Ä–æ–∫–∏ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å "(venv)")
# –ü—Ä–∏–º–µ—Ä: (venv) vpnbot@server:~/vpn_bot$
```

**–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:** –í–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ - —ç—Ç–æ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫–æ–ø–∏—è Python. –ï—Å–ª–∏ –≤—ã —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–∞–∫–µ—Ç—ã –≤ –Ω–µ–º, –æ–Ω–∏ –Ω–µ –ø–æ–≤–ª–∏—è—é—Ç –Ω–∞ –æ—Å—Ç–∞–ª—å–Ω—É—é —Å–∏—Å—Ç–µ–º—É. –≠—Ç–æ –∑–∞—â–∏—â–∞–µ—Ç —Å–µ—Ä–≤–µ—Ä –æ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –≤–µ—Ä—Å–∏–π.

---

## –®–∞–≥ 7Ô∏è‚É£: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
# –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ venv –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–æ (–≤ –Ω–∞—á–∞–ª–µ —Å—Ç—Ä–æ–∫–∏ "(venv)")
# –ï—Å–ª–∏ –Ω–µ—Ç, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ: source venv/bin/activate

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤—Å–µ –Ω—É–∂–Ω—ã–µ –ø–∞–∫–µ—Ç—ã
pip install -r requirements.txt

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –≤—Å—ë —É—Å—Ç–∞–Ω–æ–≤–∏–ª–æ—Å—å
pip list
```

**–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:** `requirements.txt` —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫ –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω—ã –±–æ—Ç—É:
- `aiogram` - —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è Telegram Bot API
- `asyncpg` - –¥—Ä–∞–π–≤–µ—Ä –¥–ª—è Neon PostgreSQL
- `python-dotenv` - –∑–∞–≥—Ä—É–∑–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏–∑ `.env`
- `requests` - HTTP –∑–∞–ø—Ä–æ—Å—ã –∫ API

---

## –®–∞–≥ 8Ô∏è‚É£: –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ .env

```bash
# –°–æ–∑–¥–∞–π—Ç–µ .env —Ñ–∞–π–ª –∏–∑ —à–∞–±–ª–æ–Ω–∞
cp .env.example .env

# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env –∏ –¥–æ–±–∞–≤—å—Ç–µ —Ä–µ–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
nano .env
```

**–°–æ–¥–µ—Ä–∂–∏–º–æ–µ .env:**
```
BOT_TOKEN=8520411926:AAFcduqngB2ZMCp3RS4yZ8hwkcyf-yOmWyU
DATABASE_URL=postgresql://neondb_owner:npg_Amb6VC5tLaDB@ep-cool-wave-agw01v53-pooler.c-2.eu-central-1.aws.neon.tech/neondb?sslmode=require&channel_binding=require
CRYPTOBOT_TOKEN=508663:AAZcVJabRaP6NTah1LVJVl3p1E0GYTid9GK
XUI_PANEL_URL=https://195.133.21.73:2053
XUI_PANEL_PATH=/ozsDaJc9vZ4iwfvWZi/panel
XUI_USERNAME=GtFIrnml0B
XUI_PASSWORD=yrbFCWxMJY
XUI_INBOUND_ID=2
SUB_PORT=2096
SUB_EXTERNAL_HOST=195.133.21.73
NEWS_CHANNEL_ID=@spn_newsvpn
NEWS_CHANNEL_URL=https://t.me/spn_newsvpn
TELEGRAPH_AGREEMENT_URL=https://telegra.ph/your-agreement
OWNER_ID=6910097562
ADMIN_USERNAME=Youdarov
```

**–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:** `.env` —Ñ–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ secrets (–ø–∞—Ä–æ–ª–∏, —Ç–æ–∫–µ–Ω—ã). –≠—Ç–æ –æ—á–µ–Ω—å –≤–∞–∂–Ω–æ - –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ `.env` –≤ Git!

---

## –®–∞–≥ 9Ô∏è‚É£: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–æ—Ç–∞ –ª–æ–∫–∞–ª—å–Ω–æ

```bash
# –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ venv –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–æ
source venv/bin/activate

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞ –≤—Ä—É—á–Ω—É—é (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
python3 vpn_bot.py

# –î–æ–ª–∂–µ–Ω –≤—ã–≤–µ—Å—Ç–∏ –ª–æ–≥–∏:
# INFO:asyncio:...
# –ï—Å–ª–∏ –ø–æ—è–≤–∏–ª–∞—Å—å –æ—à–∏–±–∫–∞, –∏—Å–ø—Ä–∞–≤—å—Ç–µ –µ—ë –ø–µ—Ä–µ–¥ —Å–ª–µ–¥—É—é—â–∏–º —à–∞–≥–æ–º

# –î–ª—è –≤—ã—Ö–æ–¥–∞ –Ω–∞–∂–º–∏—Ç–µ: Ctrl+C
```

**–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:** –ü–µ—Ä–µ–¥ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–µ–π –≤–∞–∂–Ω–æ —É–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –±–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ.

---

## –®–∞–≥ üîü: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ systemd —Å–µ—Ä–≤–∏—Å–∞

Systemd - —ç—Ç–æ —Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ—Ä–≤–∏—Å–∞–º–∏ –≤ Linux. –û–Ω–∞ –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞—Ç—å, –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—Ç—å –∏ —É–ø—Ä–∞–≤–ª—è—Ç—å –±–æ—Ç–æ–º.

```bash
# –í—ã–π–¥–∏—Ç–µ –∏–∑ venv –∏ –≤–µ—Ä–Ω–∏—Ç–µ—Å—å –Ω–∞ root
deactivate
exit  # –≤—ã—Ö–æ–¥ –∏–∑ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è vpnbot (–µ—Å–ª–∏ –≤—ã –±—ã–ª–∏ –≤ su)

# –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø–∞–ø–∫—É systemd —Å–µ—Ä–≤–∏—Å–æ–≤
cd /etc/systemd/system/

# –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª —Å–µ—Ä–≤–∏—Å–∞ (–æ—Ç root'–∞!)
sudo nano vpn-bot.service
```

**–°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ `/etc/systemd/system/vpn-bot.service`:**

```ini
[Unit]
Description=SPN VPN Telegram Bot
After=network.target

[Service]
Type=simple
User=vpnbot
WorkingDirectory=/home/vpnbot/vpn_bot
Environment="PATH=/home/vpnbot/vpn_bot/venv/bin"

# –í—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–∑ .env
Environment="BOT_TOKEN=8520411926:AAFcduqngB2ZMCp3RS4yZ8hwkcyf-yOmWyU"
Environment="DATABASE_URL=postgresql://neondb_owner:npg_Amb6VC5tLaDB@ep-cool-wave-agw01v53-pooler.c-2.eu-central-1.aws.neon.tech/neondb?sslmode=require&channel_binding=require"
Environment="CRYPTOBOT_TOKEN=508663:AAZcVJabRaP6NTah1LVJVl3p1E0GYTid9GK"
Environment="XUI_PANEL_URL=https://195.133.21.73:2053"
Environment="XUI_PANEL_PATH=/ozsDaJc9vZ4iwfvWZi/panel"
Environment="XUI_USERNAME=GtFIrnml0B"
Environment="XUI_PASSWORD=yrbFCWxMJY"
Environment="XUI_INBOUND_ID=2"
Environment="SUB_PORT=2096"
Environment="SUB_EXTERNAL_HOST=195.133.21.73"
Environment="NEWS_CHANNEL_ID=@spn_newsvpn"
Environment="NEWS_CHANNEL_URL=https://t.me/spn_newsvpn"
Environment="TELEGRAPH_AGREEMENT_URL=https://telegra.ph/your-agreement"
Environment="OWNER_ID=6910097562"
Environment="ADMIN_USERNAME=Youdarov"

ExecStart=/home/vpnbot/vpn_bot/venv/bin/python3 /home/vpnbot/vpn_bot/vpn_bot.py

# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ —Å–±–æ–µ
Restart=always
RestartSec=10

# –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
StandardOutput=journal
StandardError=journal

[Install]
WantedBy=multi-user.target
```

**–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:**
- `[Unit]` - –æ–ø–∏—Å–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞
- `[Service]` - –∫–∞–∫ –µ–≥–æ –∑–∞–ø—É—Å–∫–∞—Ç—å
  - `User=vpnbot` - –æ—Ç –∫–∞–∫–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∑–∞–ø—É—Å–∫–∞—Ç—å
  - `Environment` - –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–≤–º–µ—Å—Ç–æ .env —Ñ–∞–π–ª–∞)
  - `ExecStart` - –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è –∑–∞–ø—É—Å–∫–∞
  - `Restart=always` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—Ç—å –ø—Ä–∏ —Å–±–æ–µ
- `[Install]` - –∫–æ–≥–¥–∞ –∑–∞–ø—É—Å–∫–∞—Ç—å (–ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å–∏—Å—Ç–µ–º—ã)

---

## –®–∞–≥ 1Ô∏è‚É£1Ô∏è‚É£: –ê–∫—Ç–∏–≤–∞—Ü–∏—è systemd —Å–µ—Ä–≤–∏—Å–∞

```bash
# –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ systemd –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
sudo systemctl daemon-reload

# –í–∫–ª—é—á–∏—Ç–µ —Å–µ—Ä–≤–∏—Å (–æ–Ω –±—É–¥–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ)
sudo systemctl enable vpn-bot

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å
sudo systemctl start vpn-bot

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –æ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç
sudo systemctl status vpn-bot

# –î–æ–ª–∂–µ–Ω –≤—ã–≤–µ—Å—Ç–∏:
# ‚óè vpn-bot.service - SPN VPN Telegram Bot
#    Loaded: loaded (/etc/systemd/system/vpn-bot.service; enabled; vendor preset: enabled)
#    Active: active (running) since ...
```

**–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:**
- `daemon-reload` - –≥–æ–≤–æ—Ä–∏—Ç systemd –ø–µ—Ä–µ–∏–≥—Ä–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥–∏
- `enable` - –≤–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å–µ—Ä–≤–µ—Ä–∞
- `start` - –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å
- `status` - –ø–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç—É—Å

---

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

## –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (–∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å –∫–æ–¥)

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh root@–í–ê–®_IP_–°–ï–†–í–ï–†–ê

# –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞
cd /home/vpnbot/vpn_bot

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –±–æ—Ç–∞ (–≤—Ä–µ–º–µ–Ω–Ω–æ)
sudo systemctl stop vpn-bot

# –°–∫–∞—á–∞–π—Ç–µ –Ω–æ–≤—ã–π –∫–æ–¥ —Å GitHub
git pull origin main

# –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
source venv/bin/activate

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ/–æ–±–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–Ω–∞ —Å–ª—É—á–∞–π –µ—Å–ª–∏ –ø–æ—è–≤–∏–ª–∏—Å—å –Ω–æ–≤—ã–µ)
pip install -r requirements.txt

# –í—ã–∫–ª—é—á–∏—Ç–µ venv
deactivate

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞ –æ–±—Ä–∞—Ç–Ω–æ
sudo systemctl start vpn-bot

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –∑–∞–ø—É—Å—Ç–∏–ª—Å—è
sudo systemctl status vpn-bot

# –ü—Ä–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ (Ctrl+C –¥–ª—è –≤—ã—Ö–æ–¥–∞)
sudo journalctl -u vpn-bot -f
```

**–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:**
- `git pull origin main` - —Å–∫–∞—á–∏–≤–∞–µ—Ç –Ω–æ–≤—ã–π –∫–æ–¥ —Å –æ—Å–Ω–æ–≤–Ω–æ–π –≤–µ—Ç–∫–∏
- `pip install -r requirements.txt` - —É–±–µ–¥–∏—Ç—Å—è —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–º–æ–∂–µ—Ç –±—ã—Ç—å –æ–Ω–∏ –æ–±–Ω–æ–≤–∏–ª–∏—Å—å)
- `systemctl stop/start` - –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç –±–æ—Ç–∞
- `journalctl` - –ø—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ (—Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ systemd)

---

# –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–æ—Ç–æ–º

## –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç—É—Å–∞
sudo systemctl status vpn-bot

# –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
sudo systemctl start vpn-bot

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–æ—Ç–∞
sudo systemctl stop vpn-bot

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –±–æ—Ç–∞
sudo systemctl restart vpn-bot

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 50 —Å—Ç—Ä–æ–∫)
sudo journalctl -u vpn-bot -n 50

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ (Ctrl+C –¥–ª—è –≤—ã—Ö–æ–¥–∞)
sudo journalctl -u vpn-bot -f

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π —á–∞—Å
sudo journalctl -u vpn-bot --since "1 hour ago"

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –±–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç
sudo systemctl is-active vpn-bot
# –í—ã–≤–æ–¥: active (–µ—Å–ª–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç) –∏–ª–∏ inactive (–µ—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç)
```

---

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

## –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

```bash
# –õ–æ–≥–∏ systemd —Ö—Ä–∞–Ω—è—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
# –ü—Ä–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ø–æ—Å–ª–µ–¥–Ω–∏–µ –æ—à–∏–±–∫–∏:
sudo journalctl -u vpn-bot -p err

# –ü—Ä–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –≤—Å–µ –ª–æ–≥–∏ –∑–∞ —Å–µ–≥–æ–¥–Ω—è:
sudo journalctl -u vpn-bot --since today

# –ü—Ä–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ —Å –æ—Ç–º–µ—Ç–∫–∞–º–∏ –≤—Ä–µ–º–µ–Ω–∏:
sudo journalctl -u vpn-bot -o short-precise
```

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∏—Å–∫–æ–≤–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —Ö–≤–∞—Ç–∞–µ—Ç –ª–∏ –º–µ—Å—Ç–∞
df -h

# –ï—Å–ª–∏ –º–∞–ª–æ –º–µ—Å—Ç–∞, —É–¥–∞–ª–∏—Ç–µ —Å—Ç–∞—Ä—ã–µ –ª–æ–≥–∏:
sudo journalctl --vacuum=30d  # –æ—Å—Ç–∞–≤–∏—Ç—å –ª–æ–≥–∏ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 30 –¥–Ω–µ–π
```

---

# –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

## –ü—Ä–æ–±–ª–µ–º–∞: –ë–æ—Ç –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

```bash
# 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å
sudo systemctl status vpn-bot

# 2. –ü—Ä–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –æ—à–∏–±–∫–∏ –≤ –ª–æ–≥–∞—Ö
sudo journalctl -u vpn-bot -n 100

# 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ .env –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∑–∞–ø–æ–ª–Ω–µ–Ω
cat /home/vpnbot/vpn_bot/.env

# 4. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞ –≤—Ä—É—á–Ω—É—é –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
cd /home/vpnbot/vpn_bot
source venv/bin/activate
python3 vpn_bot.py
# –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –∫–∞–∫–∞—è –æ—à–∏–±–∫–∞

# 5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
ls -la /home/vpnbot/vpn_bot/
# User –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å vpnbot
```

## –ü—Ä–æ–±–ª–µ–º–∞: –ë–æ—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –Ω–æ –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç

```bash
# 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ BOT_TOKEN –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
grep BOT_TOKEN /home/vpnbot/vpn_bot/.env

# 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ DATABASE_URL –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
grep DATABASE_URL /home/vpnbot/vpn_bot/.env

# 3. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ –æ—à–∏–±–æ–∫ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
sudo journalctl -u vpn-bot -f | grep -i error

# 4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Neon
# –ü—Ä–æ—Å—Ç–æ –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏, –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –∫ –ë–î
```

## –ü—Ä–æ–±–ª–µ–º–∞: –í—ã—Å–æ–∫–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
htop

# –ù–∞–π–¥–∏—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å python (vpn_bot.py)
# –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –º–Ω–æ–≥–æ –ø–∞–º—è—Ç–∏, –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ:
sudo systemctl restart vpn-bot
```

---

# –†–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏

## –†–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è –∫–æ–¥–∞

```bash
# Git –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ö—Ä–∞–Ω–∏—Ç –∏—Å—Ç–æ—Ä–∏—é
# –ß—Ç–æ–±—ã –æ—Ç–∫–∞—Ç–∏—Ç—å—Å—è –Ω–∞ —Å—Ç–∞—Ä—É—é –≤–µ—Ä—Å–∏—é:
cd /home/vpnbot/vpn_bot
git log --oneline  # –ø—Ä–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –∏—Å—Ç–æ—Ä–∏—é
git revert <commit_hash>  # –æ—Ç–∫–∞—Ç–∏—Ç–µ—Å—å –Ω–∞ —Å—Ç–∞—Ä—ã–π –∫–æ–º–º–∏—Ç
```

## –†–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

```bash
# Neon –∏–º–µ–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ
# –ù–æ –≤—ã –º–æ–∂–µ—Ç–µ —Å–¥–µ–ª–∞—Ç—å —Ä—É—á–Ω—É—é –≤—ã–≥—Ä—É–∑–∫—É:

# 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ psql (–∫–ª–∏–µ–Ω—Ç PostgreSQL)
apt install -y postgresql-client

# 2. –í—ã–≥—Ä—É–∑–∏—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
pg_dump "postgresql://neondb_owner:npg_Amb6VC5tLaDB@ep-cool-wave-agw01v53-pooler.c-2.eu-central-1.aws.neon.tech/neondb" > backup.sql

# 3. –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª —Å —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—É—é –º–∞—à–∏–Ω—É
# –ù–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ:
scp root@–í–ê–®_IP_–°–ï–†–í–ï–†–ê:/home/vpnbot/vpn_bot/backup.sql ~/backup.sql
```

---

# –°—Ä–∞–≤–æ –®–ø–∞—Ä–≥–∞–ª–∫–∞

## –ü–µ—Ä–≤—ã–π —Ä–∞–∑ (Initial Deploy):

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –æ—Ç root:
ssh root@195.133.21.73
apt update && apt upgrade -y
apt install -y python3 python3-pip python3-venv git
useradd -m -s /bin/bash vpnbot
su - vpnbot
git clone https://github.com/YOUR_USERNAME/vpn_bot.git
cd vpn_bot
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt
cp .env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏
nano .env

# –í–µ—Ä–Ω–∏—Ç–µ—Å—å –Ω–∞ root:
deactivate
exit
# –°–æ–∑–¥–∞–π—Ç–µ systemd —Å–µ—Ä–≤–∏—Å (—Å–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –≤—ã—à–µ)
sudo nano /etc/systemd/system/vpn-bot.service
sudo systemctl daemon-reload
sudo systemctl enable vpn-bot
sudo systemctl start vpn-bot
sudo systemctl status vpn-bot
```

## –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ (Update Deploy):

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –æ—Ç root:
ssh root@195.133.21.73
cd /home/vpnbot/vpn_bot
sudo systemctl stop vpn-bot
git pull origin main
source venv/bin/activate
pip install -r requirements.txt
deactivate
sudo systemctl start vpn-bot
sudo systemctl status vpn-bot
```

---

–í—Å—ë –≥–æ—Ç–æ–≤–æ! –¢–µ–ø–µ—Ä—å –≤–∞—à –±–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ VPS –∏ –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –ø—Ä–∏ —Å–±–æ—è—Ö. üöÄ
